<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ÙØ§Ù†ÙˆØ³ Ø±Ù…Ø¶Ø§Ù† Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ - ÙÙ†Ø§Ù†ÙŠØ³</title>
    <style>
        body {
            background: radial-gradient(circle, #0f172a 0%, #020617 100%);
            color: #fbbf24;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .countdown { margin-bottom: 20px; text-align: center; }
        #timer { font-size: 1.8rem; font-weight: bold; text-shadow: 0 0 15px rgba(251, 191, 36, 0.6); }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙØ§Ù†ÙˆØ³ */
        .lantern-world {
            position: relative;
            width: 320px; height: 550px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .lantern-world:active { transform: scale(0.98); }

        /* Ù‡ÙŠÙƒÙ„ Ø§Ù„ÙØ§Ù†ÙˆØ³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ */
        .fanous-frame {
            position: absolute; width: 100%; height: 100%;
            z-index: 20; pointer-events: none;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ø¬Ø§Ø¬ Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡Ø§ Ø§Ù„Ø­Ø±ÙƒØ© */
        .glass-area {
            position: absolute;
            top: 25%; left: 18%;
            width: 64%; height: 40%;
            z-index: 5;
            border-radius: 50% 50% 15% 15%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.03);
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ§Øª (Ø§Ù„Ø¯ÙˆØ±Ø§Ù†) */
        .rotator {
            position: absolute; width: 100%; height: 100%;
            display: none; transform-style: preserve-3d;
        }
        .active .rotator { display: block; animation: spinInside 5s linear infinite; }

        .fanis-img {
            position: absolute; width: 70px; /* Ø­Ø¬Ù… ÙÙ†Ø§Ù†ÙŠØ³ Ø¬ÙˆÙ‡ */
            top: 45%; left: 38%;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
        }

        /* ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø´Ø®ØµÙŠØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© */
        .f1 { transform: rotateY(0deg) translateZ(60px); }
        .f2 { transform: rotateY(180deg) translateZ(60px); }

        @keyframes spinInside {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }

        /* Ø§Ù„Ø¬Ù„ÙŠØªØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠ */
        #glitterCanvas { position: absolute; top: 0; left: 0; z-index: 10; pointer-events: none; }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ†ÙˆÙŠØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠ */
        .glow-light {
            position: absolute; top: 40%; left: 50%;
            transform: translate(-50%, -50%);
            width: 280px; height: 280px;
            background: radial-gradient(circle, rgba(251, 191, 36, 0.4) 0%, transparent 70%);
            z-index: 4; opacity: 0; transition: opacity 0.6s;
        }
        .active .glow-light { opacity: 1; }

    </style>
</head>
<body>

    <div class="countdown">
        <h2>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† ÙŠÙˆÙ… 19 Ù…Ø§Ø±Ø³ ğŸŒ™</h2>
        <div id="timer">Ø¨ÙŠØ­Ù…Ù„ Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ...</div>
    </div>

    <div class="lantern-world" id="mainFanous">
        <div class="glow-light"></div>
        
        <img src="https://i.ibb.co/L5fX0y0/vintage-lantern-frame.png" class="fanous-frame">

        <div class="glass-area">
            <canvas id="glitterCanvas"></canvas>
            <div class="rotator">
                <img src="https://i.ibb.co/6yXm1F3/fanis2.png" class="fanis-img f1" alt="ÙÙ†Ø§Ù†ÙŠØ³">
                <img src="https://i.ibb.co/k2Vp9p4/fanis1.png" class="fanis-img f2" alt="Ø§Ù„Ø¨Ù†Øª">
            </div>
        </div>
    </div>

    <audio id="ramadanSong" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-ramadan-spirit-620.mp3" type="audio/mpeg">
    </audio>

    <script>
        const fanous = document.getElementById('mainFanous');
        const song = document.getElementById('ramadanSong');
        const canvas = document.getElementById('glitterCanvas');
        const ctx = canvas.getContext('2d');
        let isOn = false;

        // 1. ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ§Ù†ÙˆØ³ (Ø§Ù„Ø¶ØºØ·)
        fanous.onclick = function() {
            isOn = !isOn;
            this.classList.toggle('active');
            if(isOn) {
                song.play();
                initGlitter();
            } else {
                song.pause();
            }
        };

        // 2. Ø¹Ø¯Ø§Ø¯ Ø±Ù…Ø¶Ø§Ù† (19 Ù…Ø§Ø±Ø³)
        const ramadanDate = new Date("March 19, 2026 00:00:00").getTime();
        setInterval(() => {
            const now = new Date().getTime();
            const diff = ramadanDate - now;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById('timer').innerText = `Ø¨Ø§Ù‚ÙŠ ${d} ÙŠÙˆÙ… Ùˆ ${h} Ø³Ø§Ø¹Ø©`;
        }, 1000);

        // 3. Ø­Ø±ÙƒØ© Ø§Ù„Ø¬Ù„ÙŠØªØ± (Ø¹Ø§ØµÙØ© Ø§Ù„Ø«Ù„Ø¬)
        let dots = [];
        function initGlitter() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            dots = [];
            for(let i=0; i<70; i++) {
                dots.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*1.5+0.5 });
            }
        }

        function draw() {
            if(isOn) {
                ctx.clearRect(0,0,canvas.width, canvas.height);
                ctx.fillStyle = "rgba(251, 191, 36, 0.8)";
                dots.forEach(p => {
                    ctx.beginPath(); ctx.arc(p.x, p.y, 1.2, 0, Math.PI*2); ctx.fill();
                    p.y += p.s; if(p.y > canvas.height) p.y = -5;
                });
            }
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>
